<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Calendar App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #f2f2f2;
    }

    textarea {
      width: 100%;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>Simple Calendar App</h1>
  <div>
    <textarea id="noteInput" placeholder="Enter your note..."></textarea>
    <button onclick="saveNote()">Save Note</button>
  </div>
  <table id="calendar">
    <thead>
      <tr>
        <th>Sun</th>
        <th>Mon</th>
        <th>Tue</th>
        <th>Wed</th>
        <th>Thu</th>
        <th>Fri</th>
        <th>Sat</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    // Initialize the calendar
    window.onload = function () {
      buildCalendar();
    };

    // Build the calendar
    function buildCalendar() {
      var calendarBody = document.querySelector('#calendar tbody');
      calendarBody.innerHTML = '';

      var currentDate = new Date();
      var firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
      var lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);

      var dateCounter = new Date(firstDay);
      dateCounter.setDate(1 - firstDay.getDay());

      while (dateCounter <= lastDay) {
        var weekRow = document.createElement('tr');

        for (var i = 0; i < 7; i++) {
          var dateCell = document.createElement('td');
          var day = dateCounter.getDate();

          dateCell.textContent = day;
          dateCell.dataset.date = dateCounter.toISOString().split('T')[0];
          dateCell.onclick = function () {
            displayNoteForDate(this.dataset.date);
          };

          weekRow.appendChild(dateCell);
          dateCounter.setDate(dateCounter.getDate() + 1);
        }

        calendarBody.appendChild(weekRow);
      }
    }

    // Save note for the selected date
    function saveNote() {
      var noteInput = document.getElementById('noteInput');
      var selectedDateCell = document.querySelector('#calendar td.selected');
      if (!selectedDateCell) {
        alert('Please select a date.');
        return;
      }

      var date = selectedDateCell.dataset.date;
      var note = noteInput.value;

      var notes = JSON.parse(localStorage.getItem('notes')) || {};
      notes[date] = note;
      localStorage.setItem('notes', JSON.stringify(notes));

      alert('Note saved successfully.');
      noteInput.value = '';
      displayNoteForDate(date);
    }

    // Display note for the selected date
    function displayNoteForDate(date) {
      var noteInput = document.getElementById('noteInput');
      var selectedDateCell = document.querySelector('#calendar td.selected');

      // Remove the 'selected' class from the previously selected cell
      if (selectedDateCell) {
        selectedDateCell.classList.remove('selected');
      }

      // Highlight the selected date cell
      var dateCells = document.querySelectorAll('#calendar td');
      dateCells.forEach(function (cell) {
        if (cell.dataset.date === date) {
          cell.classList.add('selected');
        }
      });

      // Display the note for the selected date
      var notes = JSON.parse(localStorage.getItem('notes')) || {};
      noteInput.value = notes[date] || '';
    }

    function displayNotesOnLoad() {
    var dateCells = document.querySelectorAll('#calendar td');
    dateCells.forEach(function (cell) {
      var date = cell.dataset.date;
      var notes = JSON.parse(localStorage.getItem('notes')) || {};
      if (notes[date]) {
        cell.classList.add('has-note');
      }
    });
  }

  displayNotesOnLoad();


  </script>
</body>
</html>
